!function(t){"use strict";var n="",e=Object.prototype.toString,r=Object.prototype.hasOwnProperty,i=function(){},o=Array.prototype.slice,s=null,u=function(){return s||(s=document.createElement("div"))},a=0,c=0,l={},f=window.bingo={version:{major:2,minor:1,rev:"beta",build:160821,toString:function(){return[this.major,this.minor,this.rev,this.build].join(".")}},bgNoObserve:!0,isDebug:!1,prdtVersion:"",supportWorkspace:!1,stringEmpty:n,noop:i,config:function(t){return 0==arguments.length?l:(this.extend(l,t),void this.bgTrigger("config",[l]))},hasOwnProp:function(t,n){return r.call(t,n)},trace:function(t){console.error&&console.error(t.stack||t.message||t+"")},isType:function(t,n){return e.apply(n)==="[object "+t+"]"},isUndefined:function(n){return"undefined"==typeof n||n===t},isNull:function(t){return null===t||this.isUndefined(t)},isBoolean:function(t){return this.isType("Boolean",t)},isNullEmpty:function(t){return this.isNull(t)||t===n},isFunction:function(t){return!this.isNull(t)&&t[p]===!0},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isString:function(t){return!this.isNull(t)&&t[d]===!0},isObject:function(t){return!this.isNull(t)&&this.isType("Object",t)&&!this.isElement(t)&&!this.isWindow(t)},isPlainObject:function(n){if(!this.isObject(n))return!1;try{if(n.constructor&&!r.call(n,"constructor")&&!r.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var i;for(i in n);return i===t||r.call(n,i)},isArray:function(t){return Array.isArray?Array.isArray(t):this.isType("Array",t)},isWindow:function(t){return!(!t||t!=t.window)},isElement:function(t){var n=t&&(t.ownerDocument||t).documentElement;return!!n},trim:function(t){return this.isString(t)?t.replace(/(^\s*)|(\s*$)|(^\u3000*)|(\u3000*$)|(^\ue4c6*)|(\ue4c6*$)/g,""):this.isNull(t)?"":t.toString()},replaceAll:function(t,n,e,r){return this.isNullEmpty(t)||this.isNullEmpty(n)?t:(n=n.replace(/([^A-Za-z0-9])/g,"\\$1"),t=t.replace(new RegExp(n,r||"g"),e))},toStr:function(t){return this.isNull(t)?"":t.toString()},sliceArray:function(t,n,e){if(!t)return[];var r=o.call(arguments,1);return o.apply(t,r)},inArray:function(t,n){var e=-1;return this.isFunction(t)?n.some(function(n,r){return t.apply(n,arguments)===!0?(e=r,!0):void 0}):e=n.indexOf(t),e},removeArrayItem:function(t,n){var e=f.isFunction(t);return n.filter(function(n){return e?!t.apply(this,arguments):n!=t})},makeAutoId:function(){var t=(new Date).valueOf();return c=t==a?c+1:0,a=t,[t,c].join("_")},each:function(t,n,e){t&&n&&(f.isArray(t)||(t=o.apply(t)),t.some(function(t){return n.apply(e||t,arguments)===!1}))},eachProp:function(t,n,e){if(t&&n){var r;this.each(Object.keys(t),function(t){return r=this[t],n.call(e||r,r,t,this)},t)}},htmlEncode:function(t){if(this.isNullEmpty(t))return"";var n=u();return n.textContent=t,n.innerHTML},htmlDecode:function(t){if(this.isNullEmpty(t))return"";var n=u();return n.innerHTML=t,n.textContent},extend:function(t){var n=arguments.length;if(1==n)return t&&Object.keys(t).forEach(function(n){this[n]=t[n]},this),this;var e=o.call(arguments,1);return e.forEach(function(n){n&&Object.keys(n).forEach(function(n){t[n]=this[n]},n)}),t},Class:function(t){var n=function(){var t=this._bgpro_;t&&(this._bgpro_=f.extend({},t)),this._bgpri_=new i,r&&r.apply(this,arguments)},e=n.prototype,r=null,i=function(){},o=i.prototype,s={Prop:function(t){e._bgpro_=f.extend(e._bgpro_||{},t),f.eachProp(t,function(t,n){e[n]=function(t){return 0==arguments.length?this._bgpro_[n]:(this._bgpro_[n]=t,this)}},this)},Event:function(t){e.bgEventDef(t)},Define:function(t){f.extend(e,t)},Private:function(t){f.extend(o,t)},Init:function(t){r=t}};return t.call(s),f.extend(e,{Extend:function(t){f.extend(this,t)},Private:function(t){f.extend(this._bgpri_,t)}}),n.constructor=n,n},proxy:function(t,n){return function(){return n&&n.apply(t,arguments)}},_splitEvName:function(t){return t?t.replace(/(^\s*)|(\s*$)/g,"").split(/\s+/g):[]}},h=function(t,n){return{configurable:!1,enumerable:!1,value:t,writable:n!==!1}};Object.defineProperties(Object.prototype,{bgDefProp:h(function(t,n,e){return Object.defineProperty(this,t,h(n,e)),this}),bgDefProps:h(function(t){var n={};return f.eachProp(t,function(t,e){n[e]=h(t)},this),Object.defineProperties(this,n),this})});var p="_bg_ifFn_",d="_bg_ifStr_";Function.prototype.bgDefProp(p,!0,!1),String.prototype.bgDefProp(d,!0,!1);var v=["bingoV"+f.version.major].join(""),$=[v,f.version.minor].join("_");window[v]=window[$]=f}(),function(t,n){"use strict";var e="fulfilled",r="rejected",i="pending",o=function(t){return new o.fn._init(t)},s=function(t){return t&&!!t.then};o.fn=o.prototype={constructor:o,_init:function(t,n){this.state=i,this._thenH=[];try{t(function(t){this._doNext(t,e)}.bind(this),function(t){this._doNext(t,r)}.bind(this))}catch(o){this._doNext(o,r)}return this},then:function(t,n){return this._thenH&&(this._thenH.push([t,n]),this.state!=i&&this._doNext(this._result,this.state)),this},_end:function(){this._thenH=null},_doNext:function(t,o){return t&&t.then?t.state!=r||t._thenH?(this.state=i,this._result=n,void t.then(function(t){this._doNext(t,e)}.bind(this))["catch"](function(t){this._doNext(t,r)}.bind(this))):(this.state=o,this._result=null,void this._end()):(this.state=o,this._result=t,void(0!=this._thenH.length&&this._doThenNext(t,o)))},_doThenNext:function(n,i){var o=this._thenH.shift()[i==e?0:1];switch(i){case e:try{n=t.isFunction(o)?o(n):n}catch(s){n=s}n instanceof Error?(this._doNext(n,r),t.trace(n)):this._doNext(n,e);break;case r:t.isFunction(o)?(this._end(),o(n)):this._doNext(n,r)}},"catch":function(t){return this.then(null,t)},"finally":function(t){return this.then(t,t)}},o.fn._init.prototype=o.fn,t.extend(o,{resolve:function(t){return o(function(n){n(t)})},reject:function(t){return o(function(n,e){e(t)})},timeout:function(t,n){return o(function(e){setTimeout(function(){e(n)},t)})},all:function(n,e,r){return o(function(i,o){var u=a(n,e),c=[],l=u.length;u.length>0?t.each(u,function(t,n){if(s(t)){var e=function(t){c[n]=t,--l||i(c)};t.then(e,r?e:o)}else c[n]=t,--l||i(c)}):i(c)})},race:function(n,e){return o(function(r,i){var o=a(n,e);o.length>0?t.each(o,function(t,n){s(t)?t.then(r,i):r(t)}):r()})},always:function(t,n){return this.all(t,n,!0)}});var u=Array.prototype.slice,a=function(n,e){if(n=u.call(n),0==n.length&&(n=[n]),!e)return n;var r=[];return t.each(n,function(t,n){r.push(e(t,n))}),r};o.when=o.all,o.isPromise=s,t.Promise=o,t.Deferred=function(){var t={};return t.promise=o(function(n,e){t.resolve=function(t){n(t)},t.reject=function(t){e(t)}}),t}}(bingo),function(t,n){"use strict";var e="_bg_evs_",r=t.noop,i={trigger:r,end:r,off:r},o=function(t,n,r){var o=t[e]||(t[e]={});return r===!0?o[n]||(o[n]=s()):o[n]||i},s=function(){return{isEnd:!1,list:[],on:function(t,n,e){t&&(this.isEnd?t&&t.call(n):this.list.push({one:e===!0,callback:t}))},off:function(t){t?this.list=this.list.filter(function(n){return n.callback!=t}):this.list=[]},end:function(t){try{this.trigger(n,t),this.off()}finally{this.isEnd=!0}},trigger:function(t,n,e){var r,i=this.list,o=!1;return i.forEach(function(i){return i.one===!0&&(o=!0),(r=i.callback.apply(n,t||[]))===!1?!1:e===!0?!1:void 0}),o&&(this.list=i.filter(function(t){return!t.one})),r}}},u=t._splitEvName,a=function(t){var n=t[e];n&&(t.bgOff(Object.keys(n).join(" ")),t[e]=null)};Object.prototype.bgDefProps({bgOn:function(t,n){return u(t).forEach(function(t){o(this,t,!0).on(n,this)},this),this},bgOne:function(t,n){return u(t).forEach(function(t){o(this,t,!0).on(n,this,!0)},this),this},bgOff:function(t,n){return 0==arguments.length?a(this):u(t).forEach(function(t){o(this,t).off(n)},this),this},bgEnd:function(t){return u(t).forEach(function(t){o(this,t,!0).end(this)},this),this},bgTrigger:function(t,n,e){var r;return u(t).forEach(function(t){r=o(this,t).trigger(n,e||this)},this),r},bgTriggerHandler:function(t,n,e){var r;return u(t).forEach(function(t){r=o(this,t).trigger(n,e||this,!0)},this),r},bgEventDef:function(t){return u(t).forEach(function(t){this[t]=function(n){return this.bgOn(t,n)}},this),this},bgDispose:function(n){if(this.bgIsDispose)return void(n&&n.bgDispose());if(1==arguments.length)return void(n&&n.bgIsDispose||(this._bg_dispose||(this._bg_dispose=[])).push(n));this.bgIsDispose=!0;try{this.bgDispose=t.noop,this.bgDisposeStatus=1,this.bgTrigger("_bg_disp_"),t.each(this._bg_dispose,function(t){t.bgDispose()})}finally{this._bg_clsobd(),Object.keys(this).forEach(function(t){var n=this[t];n&&n.bgAutoDispose===!0&&n.bgDispose(),this[t]=null},this),this.bgDispose=t.noop,this.bgIsDispose=!0,this.bgDisposeStatus=2}},bgOnDispose:function(t){return this.bgOn("_bg_disp_",t)},bgIsDispose:!1,bgDisposeStatus:0,bgAutoDispose:!1,bgSync:function(t,n){var e=this._bgSync_||(this._bgSync_={_count:0,_end:function(){0!=this._count&&(this._count--,0==this._count&&(r._bgSync_=null,this.bgTrigger("done",[],r)))}}.bgEventDef("done")),r=this;return this.bgSyncAdd(1),n&&e.done(n),t&&t.call(this),e},bgSyncAdd:function(n){(this._bgSync_||this.bgSync())._count++,!!n&&setTimeout(t.proxy(this,function(){this.bgSyncDec()}),n)},bgSyncDec:function(){this._bgSync_&&this._bgSync_._end()}})}(bingo),function(t,n){"use strict";var e=(t._splitEvName,"_bg_obdata_"),r=function(n){return t.isArray(n)||t.isObject(n)},i=function(t,n,i){e in t||!function(){var n,r=[];t.bgDefProp(e,{deep:i,obs:{},sobs:[],sendObj:function(e){n&&clearTimeout(n),r.push(e);var i=this.sobs;i.length>0&&(n=setTimeout(function(){try{i.forEach(function(t){t.fn&&t.fn.call(this,r)},t)}finally{n=0,r=[]}},1))}},!1)}();var s=t[e];return i=i!==!1||s.deep,n.forEach(function(n,e){if(0!=n.indexOf("_")){var a=t[n];if(!o(t,n)){s.obs[n]=[];var c=function(){return m&&m.push({name:n,object:this,value:a,isChild:(m[m.length-1]||{}).value==this,type:"get"}),a},l=function(t){if(m&&m.push({name:n,object:this,value:a,isChild:(m[m.length-1]||{}).value==this,type:"set"}),a!=t){var e=a;a=t,i&&r(a)&&a.bgToObserve(null,i),u(this,n,{name:n,object:this,value:a,oldValue:e,type:"update"})}};Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:c,set:l}),i&&r(a)&&a.bgToObserve(null,i)}}}),t[e]},o=function(t,n){return!!s(t,n)},s=function(t,n){var r=t[e];return r&&(n?r.obs[n]:r.sobs)},u=function(n,r,i){var o=s(n,r);t.isArray(o)&&o.forEach(function(t){t.fn&&t.fn.call(this,[i])},n);var u=n[e];u&&u.sendObj(i)},a=function(n,e,r){o(n,e)||i(n,t.isNull(e)?null:[e]);var u=s(n,e);return u&&u.push({fn:r}),u},c=function(n,r,i){var o;if(o=n[e]){var s=o.obs;t.isNull(r)?i?(o.sobs=o.sobs.slice(),f(o.sobs,i)):o.sobs=[]:s[r]&&(i?(s[r]=s[r].slice(),f(s[r],i)):s[r]=[])}},l=function(t){var n=t[e];n&&(n.obs=[]),t.bgToObserve()},f=function(n,e){var r=t.inArray(function(t){return t.fn==e},n);r>-1&&(n.splice(r,1),f(n,e))};Object.prototype.bgDefProps({_bg_clsobd:function(){var t=this[e];t&&(t.deep=!1,t.obs={},t.sobs=[])},bgToObserve:function(n,e){return this.bgNoObserve?this:(t.isBoolean(n)&&(e=n,n=null),i(this,n?t.isArray(n)?n:[n]:Object.keys(this),e),this)},bgObServe:function(n,e){return this.bgNoObserve?this:(t.isNull(n)||t.isFunction(n)?(this.bgToObserve(),a(this,null,n||e)):(n?t.isArray(n)?n:[n]:Object.keys(this)).forEach(function(t){a(this,t,e)},this),this)},bgUnObServe:function(n,e){return t.isNull(n)||t.isFunction(n)?c(this,null,n||e):(n?t.isArray(n)?n:[n]:Object.keys(this)).forEach(function(t){c(this,t,e)},this),this},bgPublish:function(t){var n=t?this[t]:this;u(this,t,{name:t,object:this,value:n,oldValue:n,type:"publish"})},bgDataValue:function(t,n){var e=_(this,t,!1);return arguments.length>1&&(e[0][e[1]]=n),e[0][e[1]]},bgTestProps:function(t){return _(this,t,!0)[2]},bgNoObserve:!1});var h=["reverse","splice","push","pop","copyWithin","fill","shift","unshift","sort"],p={},d=function(t,n){var e=t._publishId;e&&clearTimeout(e),t._publishId=setTimeout(function(){var e=t._oldValue,r=e.length==t.length&&t.every(function(t,n){return t===e[n]});r||(l(t),u(t,n,{name:n,object:t,value:t,oldValue:e,type:"update"})),t._publishId=t._oldValue=null},1)};h.forEach(function(t){var n=Array.prototype[t],e=["bg",t.replace(/^.?/,function(t){return t.toUpperCase()})].join("");p[e]=function(){if(o(this)){this._oldValue||(this._oldValue=this.slice());var e=n.apply(this,arguments);return d(this,t),e}return n.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"bgLength",{configurable:!1,enumerable:!1,get:function(){return this.length},set:function(t){var n=this.length;this.length!=t&&(n=this.slice(),this.length=t,this.bgToObserve(),u(this,"",{name:"",object:this,value:this,oldValue:n,type:"update"}))}}),p._publishId=null,p._oldValue=null,Array.prototype.bgDefProps(p);var v=function(n,e){if(n===e)return!0;if(!t.isArray(e)||n.length!=e.length)return!1;for(var r=0,i=n.length;i>r;r++)if(n[r]!=e[r])return!1;return!0},$=function(n,e){if(n===e)return!0;if(!t.isObject(e))return!1;var r=0,i=!0;return t.eachProp(n,function(t,n){return r++,e[n]!==t?(i=!1,!1):void 0}),i&&t.eachProp(e,function(){r--}),i&&0===r};t.extend({observe:function(n,e,r,i){if(t.isFunction(n)&&t.isFunction(e)){var o=n,s=arguments[2]!==!1;r=e;var u,a,c,l=[],f=function(n,e,i){var s;try{if(s=3==arguments.length?i:o(),n||(t.isArray(c)?!v(c,s):t.isObject(c)?!$(c,s):c!=s)){var u=1==l.length?l[0]:null,f=u&&1==u.length?u[0]:null;return(e?r.orgFn||r:r).call(w,{name:f?f.name:"",value:s,oldValue:c,object:f?f.object:u||l,type:"bingo.observe"})}}finally{c=t.isArray(s)?t.sliceArray(s):t.isObject(s)?t.extend({},s):s,w.value=s,l=[],a=null}},h=function(t){t&&l.push(t),a||(a=setTimeout(f,1))},p=function(t){w.refresh(),h(t)},d=function(t){u=y(o),w.isSucc=g&&!b,w.isSucc&&(u.w.forEach(function(t){t.object.bgObServe(t.name,h)}),w.isObs=u.w.length>0,u.p.forEach(function(t){"toObsObj"in t&&t.value&&t.value.bgObServe(p),t.object.bgObServe(t.name,p)})),s?t!==!0?w.value=c=u.val:w.check():(w.value=c=u.val,f(!0,!0,c),s=!0)},m=function(){u&&(u.w.forEach(function(t){t.object.bgUnObServe(t.name,h)}),u.p.forEach(function(t){"toObsObj"in t&&t.value&&t.value.bgUnObServe(p),t.object.bgUnObServe(t.name,p)}),u=null)},w={check:function(){h(null)},publish:function(t){return f(!0,t)},unObserve:function(){m(),this.bgDispose()},refresh:function(){m(),d(!0)},init:function(){w.init=t.noop,d()}};return s&&w.init(),w}if(n){var x=_(n,e,!1),n=x[0],j=x[1],A=function(){return n[j]};return t.observe(A,r,i)}},isObserve:function(t,n){return o(t,n)}}),t.observe.error=function(){b=!0};var g,b,m=null,y=function(t){try{m=[],g=!1,b=!1;var n=t(),e=w();return g=!0,e.val=n,e}finally{m=null}},w=function(){var n=[];m.forEach(function(t,e,r){var i=e+1,o=r.length==i;if(o)n.push(t);else{var s=r[i];s.isChild||n.push(t)}});var e=[];n.forEach(function(t){var n=e.some(function(n){return t.name==n.name&&t.object==n.object});n||e.push(t)});var r=[];return m.forEach(function(n){var i=n.value,o=!0;if((t.isNull(i)||t.isArray(i))&&(n.toObsObj=!0,o=!1),o=o&&e.some(function(t){return n.name==t.name&&n.object==t.object}),!o){var s=r.some(function(t){return n.name==t.name&&n.object==t.object});s||r.push(n)}}),{w:e,p:r}},_=function(n,e,r){if(!t.isString(e))return[n,e];var i="=bingo_dot=";e=e.replace(/\[(["']?)(.*?)\1\][.]?/g,function(t,n,e){return[".",e.replace(".",i),"."].join("")}).replace(/\.$/,"");var o=e.split("."),s=/[^0-9]/,u=o.length-2,a=n,c=e,l=!0;return u>=0&&o.forEach(function(t,n){return t=t.replace(i,"."),"this"!=t?r&&!x(a,t)?(l=!1,!1):void(u>=n?a[t]?a=a[t]:(a[t]=s.test(o[n+1])?{}:[],a.bgToObserve(t,!0),a=a[t]):(c=t,c in a||(a[c]=null,a.bgToObserve(c,!0)))):void 0}),[a,c,-1==u?x(a,c):l]},x=function(n,e){return t.isArray(n)||t.isObject(n)||t.isWindow(n)||t.isElement(n)||t.isFunction(n)?e in n:!1}}(bingo),function(t){"use strict";var n=Array.prototype.slice,e=function(n){return t.extend({name:n,bgNoObserve:!0,controller:o,_controller:{},service:s,_service:{},command:u,_command:{}},t.app._bg_appEx)},r=function(){return t.app(this.app)},i=function(n,e,i,o,s){var u=n[e];if(3==arguments.length)return u[i]||(n!=c?c[e][i]:null);if(t.isObject(o)&&s!==!1){var a=o;o=function(){return a}}t.isObject(o)||(o=p(o)),u[i]={name:i,fn:o,app:n.name,getApp:r,bgNoObserve:!0}},o=function(e,r){if(t.isFunction(e)||t.isArray(e))return e;var o=[this,"_controller"].concat(n.call(arguments));return i.apply(this,o)},s=function(t,e){var r=[this,"_service"].concat(n.call(arguments));return i.apply(this,r)},u=function(t,e){var r=[this,"_command"].concat(n.call(arguments));return i.apply(this,r)};t.extend({app:function(t,n){var r=t?a[t]||(a[t]=e(t)):c;if(!n)return r;l=r;try{return n&&n.call(r,r),r}finally{l=null}}});var a={},c=t.defualtApp=e("$$defualtApp$$"),l=null;t.extend(t.app,{_bg_appEx:{},extend:function(n){return t.extend(c,n),t.extend(this._bg_appEx,n)}});var f=function(){};f.$injects=[];var h=/^\s*function[^(]*?\(([^)]+?)\)/i,p=function(e){if(e&&(e.$injects||e.$fn))return e.$fn||e;var r=f;if(t.isArray(e)){var i=n.call(e);r=e.$fn=i.pop(),r.$injects=i,r.$owner=e.$owner}else if(t.isFunction(e)){r=e;var o=r.toString(),i=[];o.replace(h,function(n,e){e&&t.each(e.split(","),function(n){n=t.trim(n),n&&i.push(n)})}),r.$injects=i}return r},d=t.Promise,v=function(n,e,r,i){if(!n)throw new Error("not find inject: "+e);var o=n.$injects,s=[],u=[];if(o&&o.length>0){t.each(o,function(t){t in r?s.push(r[t]):u.push($(t,r,i).then(function(n){s.push(r[t]=n)}))})}return d.always(u).then(function(){var o=n.apply(i||window,s);return t.isString(e)&&(r[e]=o),o})},$=function(n,e,r){var i=null,o="";return t.isFunction(n)||t.isArray(n)?i=p(n):(o=n,i=b(o,e)),g(i?i.$injects:[o],e).then(function(){return i||(i=b(o,e)),v(i,o,e,r)})},g=function(n,e){var r=e.$app,i=[];return t.each(n,function(t){t in e||r.service(t)||i.push(r.usingAll("service::"+t))}),d.always(i)},b=function(t,n){var e=n.$app.service(t);return e?e.fn:null};t.app.extend({inject:function(n,e,r){var i=t.rootView();return e=t.extend({$view:i,$cp:i.$ownerCP,$app:this},e),$(n,e,r||i)}})}(bingo),function(t){"use strict";var n,e=t.Promise,r=document,i=r.head||r.getElementsByTagName("head")[0]||r.documentElement,o=i.getElementsByTagName("base")[0],s=/loaded|complete|undefined/i,u=Array.prototype.slice,a=function(n,e,s){var u=r.createElement("script");u.type="text/javascript",u.charset=s||"utf-8",u.async=!0,u.defer=!1,u.src=n,c(u,e||t.noop),o?i.insertBefore(u,o):i.appendChild(u)},c=function(n,e){var r=function(){if(n&&s.test(n.readyState)){n.onload=n.onerror=n.onreadystatechange=null,!t.isDebug&&n.parentNode&&n.parentNode.removeChild(n);try{e&&e(n.src)}finally{n=void 0,e=null}}};n.onload=n.onerror=n.onreadystatechange=function(){r()}},l=[],f=[],h=[],p=function(t,n){h.push({fn:t,lv:n}),h.sort(function(t,n){return t.lv-n.lv}),!v()&&y()},d=function(t){return l.some(function(n){return n==t})},v=function(){return f.length>0},$=function(n){var e=t.inArray(function(t){return this.file==n},f);return e>=0?f[e]:null},g=function(t){return e(function(e){if(d(t))e&&e(t);else{var r=$(t);r?r.fns.push(e):(f.push({file:t,fns:[e],status:0}),n||(n=setTimeout(b,0)))}})},b=function(){n=null,t.each(f,function(t){if(!(t.status>0)){var n=t.file;t.status=1,a(n,function(){m(f,t)})}})},m=function(n,e){var r=n.indexOf(e);0>r||n.splice(r,1),l.push(e.file),t.each(e.fns,function(t){t&&t(e.file)}),y()},y=function(){var n=!v();if(n){f=[];var e=h;h=[],t.each(e,function(t){t.fn()})}else b()},w=/^(.+)\:\:(.*)/,_=function(t){var n,e;return w.test(t)?(n=RegExp.$1,e=RegExp.$2):e=t,{all:t,url:e,type:n||""}},x=function(t,n,e){if(!n)return t;var r=_(t);return e=0!=e||!r.type,e?[n,r.url].join("::"):t},j=function(n,e,r,i,o){if(i!==!1){r=x(r,e,!1);var s=n.route(r);t.config();return s.promise!=K?s.promise(o):R[e](s.toUrl,o)}return R[e](r,o)},A={};t.app.extend({using:function(t,n){return j(this,"using",t,n)},usingAll:function(n,e){return n&&this.using(n,e),t.Promise(function(t){p(t,5)})}});var O=t.noop,D="text/html",E="text/plain",N="application/json",T=/%20/g,C=/^(?:GET|HEAD)$/i,P=/\?/,S=function(t){return t&&(t==D?"html":t==N?"json":/^(?:text|application)\/javascript/i.test(t)?"script":/^(?:text|application)\/xml/i.test(t)&&"xml")||"text"},k=function(t,n){return t+=(P.test(t)?"&":"?")+n},L=function(n,e){if(e.url=n,e.data){var r=[];t.isObject(e.data)&&(t.eachProp(e.data,function(n,e){r.push(encodeURIComponent(e)+"="+encodeURIComponent(t.isObject(n)||t.isArray(n)?JSON.stringify(n):n))}),e.data=r.join("&").replace(T,"+")),C.test(e.type)&&(e.url=k(n,e.data),delete e.data)}},I={type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",async:!0,beforeSend:O,success:O,error:O,complete:O,context:null,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:N,xml:"application/xml, text/xml",html:D,text:E},crossDomain:!1,timeout:0},V=function(n,e){var r=t.extend({},I,e);r.crossDomain||(r.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n)&&RegExp.$2!=window.location.host);var i=t.Deferred(),o=r.dataType,s=/=\?/.test(n);if("jsonp"==o||s)return s||(n=k(n,"callback=?")),F(n,r,i);L(n,r),n=r.url;var u,a=r.accepts[o],c={},l=/^([\w-]+:)\/\//.test(n)?RegExp.$1:window.location.protocol,f=I.xhr();r.crossDomain||(c["X-Requested-With"]="XMLHttpRequest"),a&&(a+=", */*; q=0.01",c.Accept=a,f.overrideMimeType&&f.overrideMimeType(a));!C.test(r.type);c["Content-Type"]=r.contentType,r.headers=t.extend(c,r.headers);var h=r.context;f.onreadystatechange=function(){if(4==f.readyState){clearTimeout(u);var t,n="";if(f.status>=200&&f.status<300||304==f.status||0==f.status&&"file:"==l){o=o||S(f.getResponseHeader("content-type")),t=f.responseText;try{"script"==o?(0,eval)(t):"xml"==o?t=f.responseXML:"json"==o&&(t=/^\s*$/.test(t)?null:JSON.parse(t)),n="success",i.resolve(t),r.success.call(h,t,n,f)}catch(e){n="parsererror",i.reject(f),r.error.call(h,f,n,e)}}else n="error",i.reject(f),r.error.call(h,f,n,f);r.complete.call(h,f,n)}},f.open(r.type,n,r.async);for(name in r.headers)f.setRequestHeader(name,r.headers[name]);return r.beforeSend.call(h,f,r)===!1?(f.abort(),!1):(r.timeout>0&&(u=setTimeout(function(){f.onreadystatechange=O,f.abort(),r.complete.call(h,f,"timeout")},r.timeout)),f.send(r.data?r.data:null),i.promise)},F=function(n,e,r){var o,s="jsonp"+t.makeAutoId(),u=document.createElement("script"),a=function(){i.removeChild(u),s in window&&(window[s]=O),e.complete.call(e.context,c,"abort")},c={abort:a};return e.error&&(u.onerror=function(){r.reject(),c.abort(),e.error()}),window[s]=function(t){clearTimeout(o),i.removeChild(u),delete window[s],r.resolve(t),settings.success.call(e.context,t,"success",c)},L(n,e),u.src=e.url.replace(/=\?/,"="+s),i.appendChild(u),e.timeout>0&&(o=setTimeout(function(){c.abort()},e.timeout)),r.promise},R={ajax:V,using:g,tmpl:function(n,r){var i=n,o=t.cache(A,i);if(t.isString(o))return e.resolve(o);var s=function(n){return t.isString(n)&&t.cache(A,i,n,200),n};return V(n,t.extend({dataType:"text"},r)).then(s)}},U=/^\s*<(\w+|!)[^>]*>/;t.app.extend({ajax:function(t,n,e){return j(this,"ajax",t,e,n)},_tmpl:{},saveTmpl:function(t,n){this._tmpl[t]=n},tmpl:function(n,i,o){var s="",u=n;if(t.isString(n)){if(n.indexOf("#")<0){if(!n||U.test(n))return e.resolve(n);var a=i&&i.tmplid;if(a){var c=this;return e.resolve().then(function(){return a in c._tmpl?c._tmpl[a]:t.compile({tmpl:'{{view app="'+c.name+'" /}}{{include src="'+n+'" /}}',node:r.body}).then(function(t){return t.$remove(),c.tmpl("#"+a)})})}return j(this,"tmpl",n,o,i)}var l=n.substr(1);if(this._tmpl[l])return e.resolve(this._tmpl[l]);u=document.getElementById(n.substr(1))}if(u){var f=u.children.length,h=u.firstElementChild;s=1==f&&"script"==h.tagName.toLowerCase()?h.innerHTML:u.innerHTML}return e.resolve(s)}});var B="_bg_cache2_";t.cache=function(n,e,r,i){var o=n[B];{if(2!=arguments.length){4>arguments&&(i=20),o||(o=n[B]=[]);var s=t.inArray(function(t){return t[0]==e},o),u=s>-1?o[s]:null,a=(new Date).valueOf();if(u)u[1]=r,u[2]=a;else{u=[e,r,a],o.push(u);var c=o.length-15;c>=i&&(o.sort(function(t,n){return n[2]-t[2]}),n[B]=t.sliceArray(o,0,c))}return r}if(!o)return;var s=t.inArray(function(t){return t[0]==e},o);if(s>-1){var l=o[s];return l[2]=(new Date).valueOf(),l[1]}}},t.cacheRemove=function(n,e){var r=n[B];if(r){var i=t.inArray(function(){return this[0]==e},r);return i>-1?r.splice(i,1)[0]:void 0}};var q=/(\W)/g,H=/\?[^?=]+\=.*$/,M=function(n){return!t.isNullEmpty(n)&&/[?*]+/.test(n.replace(H,""))},W=function(t){if(t=t.replace(H,""),!M(t))return null;q.lastIndex=0;var n=t.replace(q,"\\$1").replace(/\\\*\\\*/g,"(.*?)").replace(/(\\([?*]))/g,"([^./]$2?)");return n=["^",n,"$"].join(""),new RegExp(n)},z=/\{([^}]+)\}/gi,J=/\*\*|[?*](?!})/g,X=/\*$/,Z=function(n,e){if(!n||!e.url)return null;var r=e.url,i=e._reg;if(!i){var o=r.indexOf("$")>=0?r.split("$")[0]:r;z.lastIndex=0,o=o.replace(z,function(t,n){return X.test(n)?"**":"*"}),i=e._reg=e._reg=W(o)}var s=n.split("$");if(!i.test(s[0]))return null;var a=[];r.replace(J,"{*}").replace(z,function(t,n,e){a.push({key:n,find:t})});var c,l={};s[0].replace(i,function(){var n=arguments;t.each(a,function(t,e){c=t.key,"*"!=c&&(l[c.replace("*","")]=n[e+1])})});var f=l.queryParams={};return s.length>1&&(s=u.call(s,1),t.each(s,function(t,n){var e=t.split(":"),r=e[0],i=decodeURIComponent(e[1]||"");r&&(l[r]=f[r]=i)})),l},G=function(){var n={app:null,controller:null},e=this.params;if(e){var r=e.app,i=t.app(r);n.app=i,e.controller&&(n.controller=i.controller(e.controller)),n.controller&&(n.controller=n.controller.fn)}return n},Q=function(t,n,e,r,i){var o=t.promise,s=o?function(t){return o(this.toUrl,t,this)}:K;return{name:n,params:i,url:e,toUrl:r,promise:s,context:G}},K=function(t){return V(this.toUrl,t)},Y=",controller,service,app,queryParams,command",tt=function(n,e,r){if(z.lastIndex=0,!n||!e)return n;var i,o,s,u="";return t.eachProp(e,function(e,a){i=["{",a,"}"].join(""),o=["{",a,"*}"].join(""),n.indexOf(i)>=0?n=t.replaceAll(n,i,e):n.indexOf(o)>=0?n=t.replaceAll(n,o,e):Y.indexOf(","+a+",")<0&&(s=encodeURIComponent(e||""),u=1==r?[u,"$",a,":",s].join(""):[u,"&",a,"=",s].join(""))}),u&&(n=1==r?[n,u].join(""):n.indexOf("?")>=0?[n,u].join(""):[n,u.substr(1)].join("?")),n},nt=function(t){return t._route||et(t)};t.app.extend({route:function(n,e){return 1==arguments.length?this.routeContext(n):t.isObject(e)?void(n&&e&&nt(this).add(n,e)):this.routeContext(x(n,e))},routeContext:function(t){return nt(this).getRouteByUrl(t)},routeLink:function(n,e,r){var i=nt(this).getRuote(n);return i||this==t.defualtApp||(i=nt(t.defualtApp).getRuote(n)),i?x(tt(i.context.url,e,1),r):""},routeQuerystring:function(n,e,r){n||(n="");var i="";if(n.indexOf("$")>=0||n.indexOf("?")>=0){var o=this.routeContext(n);e=t.extend({},o.params.queryParams,e);var s=n.indexOf("$")>=0?"$":"?";n=n.split(s)[0]}return t.eachProp(e,function(t,n){t=encodeURIComponent(t||""),i=[i,"$",n,":",t].join("")}),x([n,i].join(""),r)}});var et=function(n){var e={bgNoObserve:!0,datas:[],add:function(n,e){var r=this.getRuote(n);t.isUndefined(e.priority)&&(e.priority=100),r?r.context=e:this.datas.push({name:n,context:e}),this.datas.sort(function(t,n){return t.context.priority-n.context.priority})},getRuote:function(n){var e=null;return t.each(this.datas,function(){return this.name==n?(e=this,!1):void 0}),e},getRouteByUrl:function(e){if(!e)return"";var r=_(e),i=r.type;e=r.url;var o=e.split("?"),s=e;o.length>1&&(e=o[0]);var u,a=null,c="",l=null;if(t.each(this.datas,function(){return a=this.context,u=a.type,u&&u!=i||!(l=Z(e,a))?void 0:(c=this.name,!1)}),!l&&n!=t.defualtApp)return nt(t.defualtApp).getRouteByUrl(s);l||(a=rt,c="defaultRoute",l={}),(l||a.defaultValue)&&(l=t.extend({},a.defaultValue,l)),l.app=n.name,o.length>1&&(l||(l={}),o[1].replace(/([^=&]+)\=([^=&]*)/g,function(t,n,e){n in l||(l[n]=decodeURIComponent(e))}));var f=it(a.toUrl,a,e,l);return Q(a,c,e,f,l)}};return n._route=e,n.route("**",rt),e},rt={priority:9999999,url:"**",toUrl:function(t,n){return t}},it=function(n,e,r,i){return t.isFunction(n)&&(n=n.call(e,r,i)),tt(n||"",i)}}(bingo),function(t,n){"use strict";var e,r=[],i=function(t){r.push(t),e.start()},o=function(){var t=[],n=r;r=[],n.forEach(function(n){n._stop||(n.n--,n.n<0?n.fn(n):t.push(n))}),t.length>0&&(r=t.concat(r))},s=function(){return r.length>0};!function(n,r){for(var i=window.requestAnimationFrame,u=window.cancelAnimationFrame,a=Date.now||function(){return(new Date).getTime()},c=["ms","moz","webkit","o"],l=c.length;--l>-1&&!i;)i=window[c[l]+"RequestAnimationFrame"],u=window[c[l]+"CancelAnimationFrame"]||window[c[l]+"CancelRequestAnimationFrame"];var f,h,p,d,v,$,g,b,m=t.isAFrame=r!==!1&&i,y={},w=function(){},_=0,x=function(){if($!=w){var t,e,r=a()-f;r>p&&(h+=r-d),f+=r,y.time=(f-h)/1e3,t=y.time-b,(!n||t>0)&&(b+=t+(t>=g?.004:g-t),e=!0),$(x),e&&(_>=2&&y.sleep(),s()?_=0:_++,o())}},j=function(){$=w,f=a(),h=a(),p=500,d=33,v=!0,y.time=0};j(),y.sleep=function(){v||j()},y.wake=function(){v=!1,$=m?function(t){var n=function(){if(t){var n=t;t=null,n()}};i(n),setTimeout(n,20*(b-y.time)*1e3+1|0)}:function(t){setTimeout(t,1e3*(b-y.time)+1|0)},x()},y.start=function(){v&&(_=0,g=1/(n||60),b=this.time+g,y.wake())},e=y}(60,!0),t.aFrame=function(n,e){(!t.isNumeric(e)||0>e)&&(e=0);var r={fn:n,n:e,_stop:!1,stop:function(){this._stop=!0},next:function(n){return t.aFrame(n,this.n+1)},frame:t.aFrame};return i(r),r},t.aFramePromise=function(n){return u(function(e){t.aFrame(e,n)})},t.aFrameProxy=function(n,e,r){var i=!1,o=function(){if(!i){i=!0;var o=arguments;t.aFrame(function(){r&&r.bgIsDispose||(i=!1,n.apply(this,o))}.bind(this),e)}};return o.orgFn=n,o};var u=t.Promise,a=u.isPromise,c=function(t,n){return a(n)&&t.push(n),n},l=function(t,n){return n&&n.forEach(function(n){c(t,n)}),n},f=function(t,e){return e||t.length>0?u.always(t):n},h=Array.prototype.slice,p={_withMd:function(t){var n=[];return t.forEach(function(t){n.push([t," = $withData.",t].join(""))}),t.length>0?["var ",n.join(","),";"].join(""):""},_cacheName:"__contextFun__",bindContext:function(n,e,r,i,o){var s=n._bg_withP;o&&!s&&(n._bg_withP=s={w:Object.keys(o)},s.ws=s.w.join(","));var u,a=[e,r,s?s.ws:""].join("_"),c=n[p._cacheName]||(n[p._cacheName]={});if(c[a])return c[a];if(u=t.cache(p,a))return u;e=["var fn = function(){ ",r?"return ":"",e,";}.bind(_this_);"].join("");var l=[i?"with ($view) {":"",s?p._withMd(s.w):"",e,"try { return fn(); } catch (e) {bingo.observe.error(e);}",i?"}":""].join(""),f=function(){return u=c[a]=new Function("_this_","$view","$withData","node","bingo","event",l),t.cache(p,a,u,200),u};try{return f()}catch(h){t.trace(e)}},reset:function(t){t[p._cacheName]={}}},d=function(n){return n&&(n.$extend=function(n){return t.extend(this,n)}),n},v=function(e,r){var i={obsList:[],withData:{},valueObj:function(t){if(this.valueParams)return this.valueParams;var n=t.$contents,e=this.withData,r=t.$view,i=!!e&&e.bgTestProps(n),o=i?!1:r.bgTestProps(n),s=o?!1:window.bgTestProps(n),u=i?e:i?window:r;return this.valueParams=[u,i||o||s]}},o=d({bgNoObserve:!0,$view:null,$node:null,$contents:"",$withData:function(n,e){switch(arguments.length){case 0:return i.withData;case 1:return t.isObject(n)?i.withData=n:i.withData[n];case 2:return i.withData[n]=e}},$bindContext:function(n,e){return function(r){return p.bindContext(this,n,e,this.$view.$hasWith,i.withData)(this.$view||this.$node,this.$view,i.withData,this.$node,t,r)}.bind(this)},$hasProps:function(){return i.valueObj(this)[0].bgTestProps(this.$contents)},$value:function(t){var n=this.$contents,e=i.valueObj(this)[0];return 0==arguments.length?e.bgDataValue(n):(this.$view.$updateAsync(),void e.bgDataValue(n,t))},$result:function(t){var n=this.$bindContext(this.$contents,!0);return n(t)},$eval:function(t){var n=this.$bindContext(this.$contents,!1);return n(t)},$layout:function(t,n,e,o){if(1==arguments.length)return void this.$init(t);var s=this.$view.$layout(t,n,e,this,!0,o===!1);return i.obsList.push(s),o!==!1&&r&&r.pushStep("CPInit",function(){return this.$view.bgToObserve(!0),[s.init()]}.bind(this)),s},$layoutResult:function(){var t=arguments,n=t.length,e=t[0],r=t[n>1?1:0],i=n>1?e?this.$attrs[e]:this.$attrs:this;return this.$layout(function(){return this.$result&&this.$result()}.bind(i||{}),r)},$layoutValue:function(){var t=arguments,e=t.length,r=t[0],i=t[e>1?1:0],o=e>1?r?this.$attrs[r]:this.$attrs:this;
return o&&(o.$hasProps()||o.$value(n)),this.$layout(function(){return this.$value&&this.$value()}.bind(o||{}),i)},$init:function(t){E(this,r,"CPInit",t)},$ready:function(t){E(this,r,"CPReady",t)}}).$extend(e);return o.bgOnDispose(function(){i.obsList.forEach(function(t){t.bgIsDispose||t.unObserve()})}),o.bgDispose(i),o},$=function(t,n,e,r,i){i.pushStep(n,function(){if(!this.bgIsDispose){var t=e[r],n=[];return t.length>0&&(e[r]=[],t.forEach(function(t){c(n,t&&t.call(this,this))},this)),this.bgToObserve(!0),n}}.bind(t))},g=function(n,e){var r={obsList:[],obsListUn:[],ctrls:[],inits:[],readys:[]},i={},o={},s=d({$hasWith:!0,$ownerCP:null,$parent:null,$children:[],$controller:function(t){r.ctrls.push(t)},$init:function(n,e){if(2==arguments.length)(i[n]||(i[n]=[])).push(e);else{if(t.isString(n))return i[n];r.inits.push(n)}},$ready:function(n,e){if(2==arguments.length)(o[n]||(o[n]=[])).push(e);else{if(t.isString(n))return o[n];r.readys.push(n)}},$observe:function(n,e,i,o,s){s!==!1&&this.bgToObserve(!0);var u=function(){return this.bgIsDispose||i&&i.bgIsDispose?void 0:(this.$updateAsync(),e.apply(this,arguments))}.bind(this);u.orgFn=e.orgFn;var a=t.isFunction(n)?t.observe(function(){return this.bgIsDispose||i&&i.bgIsDispose||n.apply(this,arguments)}.bind(this),u,s):t.observe(this,n,u,s);return o&&a.isObs||(a.isObs?r.obsList:r.obsListUn).push([a,i,o]),a},$layout:function(n,e,r,i,o,s){return this.$observe(n,t.aFrameProxy(e,r,i),i,o,s)},$layoutAfter:function(t,n,e,r,i){return this.$layout(t,n,1,e,r,i)},$update:function(t){this.$isReady&&(r.obsListUn=r.obsListUn.filter(function(n,e){var i=n[1],o=n[0];n[2];return i&&i.bgIsDispose?(o.unObserve(),!1):!o.bgIsDispose&&(o.isSucc?o.isObs||(t?o.refresh():o.check()):o.refresh(),o.isObs)?(n[2]||r.obsList.push(n),!1):!0},this))},$updateAsync:function(){this._upastime_&&clearTimeout(this._upastime_),this._upastime_=setTimeout(function(){this.bgIsDispose||this.$update()}.bind(this),1)},$remove:function(){this.$ownerCP&&this.$ownerCP.$html("")},$getNodes:function(){return this.$ownerCP.$getNodes()},$query:function(t){return this.$ownerCP.$query(t)},$queryAll:function(t){return this.$ownerCP.$queryAll(t)},$insertBefore:function(t,n,e){return this.$ownerCP.$insertBefore(t,n,e)},$insertAfter:function(t,n,e){return this.$ownerCP.$insertAfter(t,n,e)},$inject:function(n,e,r){return this.$app.inject(n,t.extend({$view:this,$cp:this.$ownerCP},e),r)},$link:function(n,e){if(e||(e=this.$parent),e){var r=e==this;t.eachProp(n,function(t,n){var i=0==t.indexOf("@");i&&(t=t.substr(1)),r&&t==n||(e.$observe(t,function(t){this.bgDataValue(n,t.value)}.bind(this)),this[n]=e.bgDataValue(t),i?this.bgToObserve(!0):this.$observe(n,function(n){this.bgDataValue(t,n.value)}.bind(e)))},this)}}}).$extend(n),u=s.$parent;return u&&u.$children.push(s),s.bgOnDispose(function(){r.obsList.forEach(function(t){t[0].bgIsDispose||t[0].unObserve()}),r.obsListUn.forEach(function(t){t[0].bgIsDispose||t[0].unObserve()}),M(this.$app,this),u&&!u.bgIsDispose&&(u.$children=t.removeArrayItem(this,u.$children))}),s.bgDispose(r),e&&(e.ctrl&&(s.$controller(e.ctrl),e.ctrl=null),e.pushStep("ViewCtrl",function(){if(!this.bgIsDispose){var t=r.ctrls,n=[];return t.length>0&&(r.ctrls=[],t.forEach(function(t){c(n,this.$inject(t))},this)),n}}.bind(s)),$(s,"ViewInit",r,"inits",e),$(s,"ViewReady",r,"readys",e)),H(s.$app,s),s},b="_bgcp_",m=function(t){return t[b]},y=function(t){t&&t.forEach(function(t){t[b]=null,ot(t)})},w=function(n){var e=[];t.each(n.$nodes,function(t){t.parentNode&&e.push(t)}),n.$nodes=e},_=function(t,n){w(t);var e=(t.$nodes,t.$nodes.length);return e>0?t.$nodes[n?e-1:0]:null},x=function(t){var n={$children:h.call(t.$children),$virtualNodes:h.call(t.$virtualNodes),$ownerView:t.$ownerView};return t._bgbak_=n},j=function(n){n._bgbak_&&j(n._bgbak_),t.each(n.$children,function(t){t.bgDispose()}),t.each(n.$virtualNodes,function(t){t.bgDispose()}),n.$ownerView&&n.$ownerView.bgDispose(),n.$children=n.$ownerView=n._bgbak_=null,n.$virtualNodes=[]},A=function(n,e){var r=_(n),i=n.$children[0],o=i&&_(i);if(o){var s=r.parentNode;if(o.parentNode!=s)return r;e||(e=h.call(s.childNodes));var e=h.call(s.childNodes);return t.inArray(r,e)<t.inArray(o,e)?r:A(i,e)}return r},O=function(n,e){var r=_(n,!0),i=n.$children[n.$children.length-1],o=i&&_(i,!0);if(o){var s=r.parentNode;return o.parentNode!=s?r:(e||(e=h.call(s.childNodes)),t.inArray(r,e)>t.inArray(o,e)?r:O(i,e))}return r},D=function(t){var n=A(t),e=O(t);if(n==e)return[n];for(var r=1==n.nodeType?[n]:[],i=n;e!=(i=i.nextSibling)&&i;)1==i.nodeType&&r.push(i);return 1==e.nodeType&&r.push(e),r},E=function(t,n,e,r){n&&n.pushStep(e,function(){return[r.call(t)]})},N=function(n,e,r){var i={ctrl:null,tmpl:"",getContent:function(n){var e=this.tmpl;return t.isFunction(e)?e():e},render:function(t,n){var e=this.getContent(t);a(e)?e.then(function(e){X(e,t,n)}):X(e,t,n),c(Q,e)}},o=v({$ownerView:null,$app:null,$cmd:"",$attrs:null,$nodes:null,$virtualNodes:[],$setNodes:function(t){y(this.$nodes),this.$nodes=t,t&&t.forEach(function(t){t[b]=this},this)},$getNodes:function(){return D(this)},$query:function(t){return this.$queryAll(t,!0)[0]},$queryAll:function(n,e){var r=[],i=!!n;return t.each(this.$nodes,function(t){return 1==t.nodeType&&(i?r=r.concat(h.call(it(n,t))):r.push(t),e&&r.length>0)?!1:void 0}),r},$parent:null,$children:null,$removeChild:function(n){this.$children=t.removeArrayItem(n,this.$children)},$getChild:function(n){var e;return t.each(this.$children,function(){return this.$id==n?(e=this,!1):void 0}),e},$export:null,$remove:function(){this.bgDispose()},$html:function(n,e){if(arguments.length>0){var r=x(this);this.$tmpl(n);var i=this.$nodes,o=_(this);return this.$nodes=[],Tt({cp:this,context:o,domBefore:function(){j(r),y(i)},opName:"insertBefore"},e)}var s=[];return t.each(this.$nodes,function(t){s.push(1==t.nodeType?t.outerHTML:t.textContent)}),s.join("")},$insertBefore:function(n,e,r){var i=e&&(e.$ownerCP||e)||this,o=A(i);if(t.isString(n))return Tt({tmpl:n,view:i.$ownerView||i.$view,parent:e?(e.$ownerCP||e).$parent:i,context:o,opName:"insertBefore"},r).then(function(t){return t.$parent.$children.unshift(t),t});var s=this.$children,a=n.$ownerCP||n,c=t.inArray(a,s);if(c>=0)if(i==this)c>0&&(s.splice(c,1),s.unshift(a),yt(D(a),o,"insertBefore"));else{var l=t.inArray(i,s);l>=0&&l-1!=c&&(s.splice(c,1),s.splice(l,0,a),yt(D(a),o,"insertBefore"))}return u.resolve(a)},$insertAfter:function(n,e,r){var i=e&&(e.$ownerCP||e)||this,o=O(i),s=o.nextSibling;if(t.isString(n))return Tt({tmpl:n,view:i.$ownerView||i.$view,parent:e?(e.$ownerCP||e).$parent:i,context:s?s:o.parentNode,opName:s?"insertBefore":"appendTo"},r).then(function(t){return t.$parent.$children.push(t),t});var a=n.$ownerCP||n,c=this.$children,l=t.inArray(a,c);if(l>=0){var f=c.length-1;if(i==this)l!=f&&(c.splice(l,1),c.push(a),yt(D(a),s?s:o.parentNode,s?"insertBefore":"appendTo"));else{var h=t.inArray(i,c);h>=0&&l-1!=h&&(c.splice(l,1),c.splice(h+1,0,a),yt(D(a),s?s:o.parentNode,s?"insertBefore":"appendTo"))}}return u.resolve(a)},$text:function(n){if(arguments.length>0)return j(this),this.$contents=this.tmplTag=t.htmlEncode(n),Et(_(this),this,"insertBefore");var e=[];return t.each(this.$nodes,function(t){e.push(t.textContent)}),e.join("")},$tmpl:function(t){return i.tmpl=t,this},$saveTmpl:function(t,n,e){if(e)this.$app.saveTmpl(t,n);else{var r=(this.$ownerView||this.$view).$ownerCP,i=r.__tmpl||(r.__tmpl={});i[t]=n}},$loadTmpl:function(n,e,r){if(t.isString(n)&&0==n.indexOf("#")){var i=n.substr(1),o=(this.$ownerView||this.$view).$ownerCP,s=o.__tmpl&&o.__tmpl[i];return t.isString(s)?u.resolve(s):this.$app.tmpl(n)}return this.$app.tmpl(n,e,r)},_render:function(t){return i.render(this,t),K()},$controller:function(t){i.ctrl=t},$inject:function(n,e,r){return this.$app.inject(n,t.extend({$view:this.$view,$cp:this},e),r)},$link:function(t,n){return(this.$ownerView||this.$view).$link(t,n)}},r).$extend(n);o.$id||(o.$id=t.makeAutoId()),e&&o.$parent&&o.$withData(t.extend({},o.$parent.$withData())),o.$attrs&&(o.$attrs._setCP(o),o.$name=o.$attrs.$getAttr("name"));var s,l,f=o.$app,p=o.$elseList;if(p){var d,l=o.$whereList;t.each(p,function(t,n){var e=G(l[n]),i=C(e[0],r)._setAS(e[1]);d=N({$cmd:"else",$app:f,$attrs:i,$view:o.$view,$contents:t,$parent:o},!1,r),p[n]=d}),o.$whereList=null}if(o.bgOnDispose(function(){y(this.$nodes);var n=this.$parent;n&&!n.bgIsDispose&&n.$removeChild(this),t.each(this.$elseList,function(t){t.bgIsDispose||t.bgDispose()}),this.$attrs&&this.$attrs.bgDispose(),j(this)}),o.bgDispose(i),r&&r.pushStep("CPCtrl",function(){if(!this.bgIsDispose){var t=i.ctrl,n=[];if(t&&(i.ctrl=null,n.push(this.$inject(t,{$view:this.$ownerView||this.$view}))),"view"!=this.$cmd&&this.$name){var e=this.$view;e[this.$name]=this.$export||this.$ownerView||e}return n}}.bind(o)),r&&r.pushStep("CPEvent",function(){if(!this.bgIsDispose){var t=this.$view,n=t.$init(this.$name+"");return n&&n.forEach(function(t){this.$init(t)},this),n=t.$ready(this.$name+""),n&&n.forEach(function(t){this.$ready(t)},this),[]}}.bind(o)),o.$cmd){s=f.command(o.$cmd);var $=function(){s&&(s=s.fn),s&&c(Q,s(o)),i.render(o,r)};s||"else"==o.$cmd?$():c(Q,o.$app.usingAll("command::"+o.$cmd).then(function(){s=f.command(o.$cmd),$()}))}else i.render(o,r);return o},T=function(t,n){return v({$contents:t})},C=function(t,n){var e=[],r=v({$contents:t,$getAttr:function(t){return this[t]?this[t].$contents:""},$setAttr:function(t,r){this[t]?this[t].$contents=r:(e.push(t),this[t]=T(r,n))},_setAS:function(t){return t.forEach(function(t){this.$setAttr(t[0],t[1])},this),this},_setCP:function(t){this.$view=t.$view,this.$cp=t,this.$withData(t.$withData());var n;e.forEach(function(e){n=this[e],n.$cp=t,n.$app=t.$app,n.$view=t.$view,n.$withData(t.$withData())},this)}});return r.bgOnDispose(function(){e.forEach(function(t){this[t].bgDispose()},this)}),r},P=function(t){var n=d({$attr:function(t,n){var e=this.$node,r=arguments.length;switch(t){case"class":if(1==r)return e.className;e.className=n;break;case"value":var i="select"==e.tagName.toLowerCase();if(1==r)return(i?Gt:Zt)(e);(i?Gt:Zt)(e,n);break;default:if(1==r)return Wt(e,t);Wt(e,t,n)}},$prop:function(t,n){return 1==arguments.length?zt(this.$node,t):void zt(this.$node,t,n)},$css:function(t,n){return 1==arguments.length?nn(this.$node,t):void nn(this.$node,t,n)},$show:function(){rn(this.$node)},$hide:function(){on(this.$node)},$on:function(t,n,r){e.push(h.call(arguments)),Jt.apply(this.$node,arguments)},$one:function(t,n,r){var i=h.call(arguments),o=this.$node;i[2]=function(){n&&n.apply(this,arguments),Xt.apply(o,arguments)},e.push(i),Jt.apply(o,i)},$off:function(t,n,e){Xt.apply(this.$node,arguments)},$is:function(t){return un(this.$node,t)},$parent:function(t){var n=an(this.$node,t);return n?L(n):null}}).$extend(t),e=[];return n.bgOnDispose(function(){e.forEach(function(t){Xt.apply(this.$node,t)},this)}),n},S="_bgvn_",k=function(t,n){n[S]=t},L=function(t){return t[S]},I=function(n,e,r){var i=n.$ownerView||n.$view,o=P({$view:i,$app:i.$app,$cp:n,$node:e,$attrs:d({}),_addAttr:function(t,n){return this.$attrs[t]=V(this,t,n,r)}});return k(o,e),Mt(o,e),n.$virtualNodes.push(o),o.bgOnDispose(function(){e[S]=null;var n=this.$attrs;t.eachProp(n,function(t){t.bgDispose()})}),o},V=function(t,n,e,r){var i=t.$cp,o=v(P({$cp:i,$vNode:t,$node:t.$node,$app:t.$app,$view:t.$view,$name:n,$contents:e}),r);o.$withData(i.$withData());var s=o.$app.attr(n),u=s&&s(o);return r&&r.pushStep("CPInit",function(){return u}.bind(this)),o},F=/\{\{\s*(\/?)\s*([^\s{}]+)\s*((?:(?:.|\n|\r)(?!\{\{|\}\}))*)(.?)\}\}/gi,R=/\{\{\s*(\/?if|else)\s*(.*?)\}\}/gi,U=/(\S+)\s*=\s*(?:\"((?:\\\"|[^"])*?)\"|\'((?:\\\'|[^'])*?)\')/gi,B=/\<\!\-\-((?:.|\n|\r)*?)\-\-\>/g,q=function(t){return["<",'script type="text/html" bg-id="',t,'"></',"script>"].join("")},H=function(t,n){t._view.push(n)},M=function(n,e){n._view=t.removeArrayItem(e,n._view)},W=function(n,e){var r=t.inArray(function(t){return t.$name==e},n._view);return r>-1?n._view[r]:null},z=function(t,n){var e,r,i,o,s,u,a,c,l,f=[],h=[],p=0,d=0,v=0;for(F.lastIndex=0,t=t.replace(B,"");e=F.exec(t);)u=e[0],c=e.index,o=e[2],r="/"==e[4]||"else"==o||"case"==o,i=r||"/"==e[1],s=e[3],!r&&(s+=e[4]),0==v&&(!r&&i||(a=t.substr(p,c-p),h.push(a),l=n.id++ +"",h.push(q(l)),f.push({id:l,index:c,single:r,end:i,tag:o,attrs:s,contents:""})),d=c+u.length),i?(r||v--,0==v&&(f[f.length-1].contents=t.substr(d,c-d))):v++,p=c+u.length;return h.push(t.substr(p,t.length-p)),{contents:h.join(""),regs:f}},J={},X=function(n,e,r){var i,o,s,u,a=t.cache(J,n);if(a)i=a.list,u=a.tmplTag;else{i=[],t.isString(n)||(n=t.toStr(n));var c=z(n,r);u=c.contents,c.regs.forEach(function(t){var n,e,r,o=t.tag,s=t.contents;if(s&&(s=s),"if"==o){var u=Z(s);s=u.contents,n=u.elseList,e=u.whereList}r={$id:t.id,$cmd:o,$attrs:G(t.attrs),$contents:s,$elseList:n,$whereList:e},i.push(r)}),t.cache(J,n,{list:i,tmplTag:u},200)}i=i.map(function(n){n=t.extend({},n),n.$elseList&&(n.$elseList=n.$elseList.slice()),n.$whereList&&(n.$whereList=n.$whereList.slice());var e=n.$attrs;return n.$attrs=C(e[0],r)._setAS(e[1]),"view"==n.$cmd&&(o=n),n}),o?(s=t.app(o.$attrs.$getAttr("app")),s==t.defualtApp&&(s=e.$app),o=g({$name:o.$attrs.$getAttr("name"),$app:s,$parent:e.$view,$ownerCP:e,$hasWith:"false"!==o.$attrs.$getAttr("with")},r),e.$ownerView=o):(s=e.$app,o=e.$view);var l,f=[];i.forEach(function(n){l=N(t.extend({},n,{$view:o,$app:s,$parent:e}),!0,r),f.push(l)}),e.$children=f,e.tmplTag=u},Z=function(t){var n,e,r=0,i=-1,o=-1;R.lastIndex=0;for(var s,u=[],a=[];n=R.exec(t);)switch(e=n[1],s=n[2],e){case"if":r++;break;case"else":0>=r&&(a.push(s),-1==o&&(o=n.index),i>=0&&u.push(t.substr(i,n.index-i)),i=n.index+n[0].length);break;case"/if":r--}return 0>=r&&i>-1&&i<t.length&&u.push(t.substr(i)),{contents:o>-1?t.substr(0,o):t,elseList:u,whereList:a}},G=function(t){U.lastIndex=0;for(var n,e=[];n=U.exec(t);)e.push([n[1],n[2]||n[3]]);return[t,e]},Q=[],K=function(){var t=Q;return Q=[],u.always(t).then(function(){return Q.length>0?K():void 0})},Y=function(){var t,n={},e=function(n,e){var r=[];return n.forEach(function(t){l(r,t())}),f(r,!0).then(t.doneStep(e))},r=!1;return t={id:0,pushStep:function(t,e){n[t]?n[t].push(e):n[t]=[e],r&&this.doneStep(t)()},doneStep:function(t){return function(){var r=n[t],i=r&&r.length>0;return i&&(n[t]=[]),i?e(r,t):null}},end:function(){r=!0}}},tt=":scope ";try{rt.querySelector(":scope body")}catch(nt){tt=""}var et=document,rt=et.documentElement,it=function(t,n){return n||(n=rt),n.querySelectorAll(tt+t)},ot=function(t){t.parentNode&&t.parentNode.removeChild(t)},st=function(){var t=et.createElement("div");t.innerHTML="<input type='checkbox'/>";var n=t.getElementsByTagName("input")[0],e=document.createDocumentFragment();return n.checked=!0,e.appendChild(n),e.cloneNode(!0).cloneNode(!0).lastChild.checked}(),ut={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],div:[1,"<div>","</div>"]},at=/\/(java|ecma)script/i,ct=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,lt=function(n){if(n.src)t.defualtApp.using(n.src);else{var e=(n.text||n.textContent||n.innerHTML||"").replace(ct,"");e&&(window.execScript||function(t){window.eval.call(window,t)})(e)}},ft=function(t,n){h.call(t.querySelectorAll("script")).forEach(function(t){t.type&&!at.test(t.type)||(ot(t),lt(t))})},ht=/checked\s*(?:[^=]|=\s*.checked.)/i,pt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",dt=new RegExp("<(?:"+pt+")[\\s/>]","i"),vt="<:nav></:nav>"!==et.createElement("nav").cloneNode(!0).outerHTML,$t=function(t){return(st||!ht.test(t))&&(vt||!dt.test(t))},gt={},bt=/^\s*$/,mt=function(n,e,r){if(bt.test(n))return[];var i=$t(n),o=i?t.cache(gt,n):null;if(!o){var s=e?t.isString(e)?e:e.tagName.toLowerCase():"",u=ut[s]||ut.div,a=u[0],c=u[1]+n+u[2];for(o=et.createElement("div"),o.innerHTML=c;a--;)o=o.lastChild;i&&t.cache(gt,n,o,200)}return i&&(o=o.cloneNode(!0)),r&&ft(o,r),h.call(o.childNodes)},yt=function(n,e,r){var i;n.length>1?(i=document.createDocumentFragment(),t.each(n,function(t){i.appendChild(t)})):i=n[0],"appendTo"==r?e.appendChild(i):e.parentNode[r](i,e)},wt=mt("<option>test</option><!--test-->","select").length>1,_t="bg-virtual",xt=function(t){return wt?et.createComment("bg-virtual"):mt(q(t.$id))[0]},jt=/script/i,At=function(t){return jt.test(t.tagName)?t.getAttribute("bg-id"):null},Ot=function(t){return wt?8==t.nodeType&&0==t.nodeValue.indexOf(_t):jt.test(t.tagName)?t.getAttribute("bg-id"):!1},Dt=function(n,e){var r=0==n.length;r||(r=t.inArray(function(t){return!Ot(t)},n)<0),r&&n.push(xt(e))},Et=function(t,n,e,r){var i=qt(n.tmplTag),o=mt(i,"appendTo"==e?t:t.parentNode,!0);if(o.length>0){var s=o[0].parentNode;Ht(n,o,r),Nt(o,n,r),o=h.call(s.childNodes)}Dt(o,n),yt(o,t,e),n.$setNodes(o)},Nt=function(t,n,e){var r,i;t.forEach(function(t){1==t.nodeType&&(r=At(t),r?(i=n.$getChild(r),i&&(Et(t,i,"insertBefore",e),ot(t))):Nt(h.call(it("script",t)),n,e))})},Tt=function(n,e){var r=n.view,i=Y();i.ctrl=e;var o,s=n.cp||N({$app:r.$app||t.defualtApp,$parent:n.parent||r.$ownerCP,$view:r,$contents:n.tmpl},!1,i).$tmpl(n.tmpl),a=n.context,c=n.opName,l="appendTo"==c,f=et.createElement((l?a:a.parentNode).tagName),p=n.domBefore;return l||(o=et.createElement("script"),o.type="text/html",et.createElement,yt([o],a,"insertBefore"),f.appendChild(a.cloneNode(!1))),s._render(i).then(function(){return u.resolve().then(i.doneStep("CPCtrl")).then(i.doneStep("ViewCtrl")).then(i.doneStep("CPEvent")).then(function(){var t=l?f:f.firstChild;Et(t,s,c,i)}).then(i.doneStep("CPInit")).then(i.doneStep("ViewInit")).then(function(){p&&p(),l?yt(f.childNodes,a,"appendTo"):(yt(h.call(f.childNodes,0,-1),o,"insertBefore"),ot(o)),f=o=null}).then(i.doneStep("CPReady")).then(i.doneStep("ViewReady"))}).then(function(){return i.end(),s})},Ct=t.attrEncode=function(t){return t?t.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/\"/g,"&quot;"):""};t.attrDecode=t.htmlDecode;var Pt=/\<(?:.|\n|\r)*?\[\[(?:.|\n|\r)*?\]\][^>]*\>/gi,St=/\s*(\S+)\s*=\s*((\")(?:\\\"|[^"])*?\[\[(?:.|\n|\r)+?\]\](?:\\\"|[^"])*\"|(\')(?:\\\'|[^'])*?\[\[(?:.|\n|\r)+?\]\](?:\\\'|[^'])*\')/gi,kt=/\s*(\/?\>)$/,Lt=/^\s*['"]((?:.|\n|\r)*?)['"]\s*$/,It=/^\s*\[\[((?:.|\n|\r)*?)\]\]\s*$/,Vt=/\[\[((?:.|\n|\r)*?)\]\]/g,Ft="bg-virtual",Rt=[" ",Ft,'="'].join(""),Ut='" $1',Bt="["+Ft+"]",qt=function(t){return t=t.replace(Pt,function(t,n,e){St.lastIndex=0;var r={},i=!1,o=!1,s=t.replace(St,function(t,n,e,s,u){return o||n==Ft?(i=!1,void(o=!0)):(s=s||u,e=e.replace(Lt,"$1").replace(It,"$1"),Vt.lastIndex=0,Vt.test(e)&&(e=s+e.replace(Vt,s+" + ($1) + "+s)+s),r[n]=e,i=!0,"")});return i&&(s=s.replace(kt,[Rt,Ct(JSON.stringify(r)),Ut].join(""))),o?t:s})},Ht=function(n,e,r){var i;t.each(e,function(e){1==e.nodeType&&(e.hasAttribute(Ft)&&I(n,e,r),e.hasChildNodes&&(i=it(Bt,e),i.length>0&&t.each(i,function(t){I(n,t,r)})))})},Mt=function(n,e){var r=e.getAttribute(Ft),i=JSON.parse(t.attrDecode(r));e.removeAttribute(Ft);t.eachProp(i,function(t,e){n._addAttr(e,t)})},Wt=function(t,n,e){return arguments.length<3?t.getAttribute(n):void t.setAttribute(n,e)},zt=function(t,n,e){return arguments.length<3?t[n]:void(t[n]=e)},Jt=document.addEventListener,Xt=document.removeEventListener,Zt=function(t,n){return arguments.length<2?t.value:void(t.value=n)},Gt=function(n,e){var r="select-one"==n.type;if(r){if(arguments.length<2)return n.value;n.value=e}else{var i=n.options,o=[];if(arguments.length<2)return t.each(i,function(t){t.selected&&!t.disabled&&o.push(t.value)}),o;t.isArray(e)||(e=[e]),t.each(i,function(t){t.selected=e.indexOf(t.value)>=0})}},Qt=document.defaultView.getComputedStyle,Kt={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Yt=function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},tn=function(n,e){return t.isNumeric(e)&&!Kt[Yt(n)]?e+"px":e},nn=function(t,e,r){var i=arguments.length;if(3>i)return 1==i?n:t.style[Yt(e)]||Qt(t,"").getPropertyValue(Yt(e));var o=null;e=Yt(e),""==r?t.style.removeProperty(e):o=e+":"+tn(e,r),o&&(t.style.cssText+=";"+o)},en=function(t){var n="_bgshow_";return n in t?t[n]:t[n]=nn(t,"display")},rn=function(t){var n=en(t);nn(t,"display","none"==n?"block":n)},on=function(t){en(t),nn(t,"display","none")},sn=rt.matchesSelector||rt.mozMatchesSelector||rt.webkitMatchesSelector||rt.oMatchesSelector||rt.msMatchesSelector,un=function(t,n){return sn.call(t,n)},an=function(t,n){return t=t.parentNode,t&&t!=rt&&t!=et?!n||un(t,n)?t:an(t,n):null};t.app.extend({_view:[],view:function(n){if(0==arguments.length)return this._view;if(t.isString(n))return W(this,n);var e=m(n);return e?e.$ownerView||e.$view:null},cp:function(t){return m(t)}}),t.rootView=function(){return cn};var cn=g({$name:"",$app:t.app("")}),ln=N({$app:t.defualtApp,$parent:null,$view:cn,$contents:"",$ownerView:cn});cn.$ownerCP=ln,t.compile=function(n,e){var r,i=t.isPlainObject(n);i&&(e=n.ctrl,r=n.tmpl,n=n.node);var o=m(n)||ln,s=o.$app,a=o.$view,c="script"==n.tagName.toLowerCase();return s.usingAll().then(function(){var t=(r?u.resolve(r):s.tmpl(n)).then(function(t){return r||(n.innerHTML=""),Tt({tmpl:t,view:a,parent:a.$ownerCP||o,context:n,opName:c?"insertBefore":"appendTo"},e).then(function(t){return c&&ot(n),t.$parent.$children.push(t),t})});return t})},t.bgEventDef("ready"),function(){var n="DOMContentLoaded",e=function(){et.removeEventListener(n,e,!1),window.removeEventListener("load",e,!1),t.bgEnd("ready")};et.addEventListener(n,e,!1),window.addEventListener("load",e,!1),window.addEventListener("unload",function(){t.rootView().$ownerCP.$remove()},!1)}()}(bingo),function(t){"use strict";var n=t.defualtApp;n.service("$rootView",function(){return t.rootView()}),n.service("$inject",["$view",function(t){return function(n,e,r){return t.$inject(n,e,r)}}]),n.service("$location",["$app",function(t){return function(n){return t.location(n)}}]),n.service("$ajax",["$app",function(t){return function(n,e){return t.ajax(n,e)}}]),n.service("$observe",["$view",function(t){return function(n,e,r){return t.$observe(n,e,r)}}]),n.service("$layout",["$view",function(t){return function(n,e,r){return t.$layout(n,e,0,r)}}]),n.service("$tmpl",["$app",function(t){return function(n,e){return t.tmpl(n,!0,e)}}]);var e={};n.service("$cache",function(){return function(n,r,i){var o=[e].concat(t.sliceArray(arguments));return t.cache.apply(t,o)}});var r={};n.service("$param",function(){return function(n,e){return 1==arguments.length?t.cache(r,n):t.cache(r,n,e,10)}})}(bingo),function(t){"use strict";var n=t.defualtApp,e=function(n){var e=n.$attrs.$getAttr("controller");if(!t.isNullEmpty(e)){var r,i=n.$view,o=i.$parent,s=i.$app;if(o.bgTestProps(e)?r=o.bgDataValue(e):window.bgTestProps(e)&&(r=window.bgDataValue(e)),t.isFunction(r)&&t.isFunction(r))n.$view.$controller(r);else{var u="controller::"+e,a=s.routeContext(u),c=a.context();if(!c.controller)return s.using(u).then(function(){if(!n.bgIsDispose){var t=a.context();t.controller&&i.$controller(t.controller)}});i.$controller(c.controller)}}};n.command("view",function(t){return e(t)}),n.command("controller",function(t){var n=t.$attrs.$getAttr("src");return n?e(n):void t.$view.$controller(function(){t.$eval()})}),n.command("using",function(t){var n=t.$attrs.$getAttr("src");return n&&t.$app.using(n)}),n.command("service",function(t){var n=t.$attrs.$getAttr("src"),e=t.$attrs.$getAttr("name");return n&&e&&t.$inject(n).then(function(n){t.$view[e]=n})});var r=/[ ]*([^ ]+)[ ]+in[ ]+(?:(.+)[ ]+tmpl[ ]*=[ ]*(.+)|(.+))/;n.command("with",function(n){n.$isAFrame=!1;var e,i,o=n.$attrs.$contents;r.test(o)?(e=RegExp.$1,i=RegExp.$2||RegExp.$4):i=o,i&&n.$init(function(){var r=n.$attrs.$bindContext(i,!0),o=r()||{};t.extend({},n.$withData());return e?n.$withData(e,o):n.$withData(o),n.$html(n.$contents)})});var i=function(n,e,r,i,o){e=t.extend([],e),i=i||{};var s=[],u=e.length,a=[];return t.each(e,function(e,c){var l=t.extend({},i);l.itemName=r,l[[r,"index"].join("_")]=l.$index=c,l[[r,"count"].join("_")]=l.$count=u,l[[r,"first"].join("_")]=l.$first=0==c,l[[r,"last"].join("_")]=l.$last=c==u-1;var f=c%2==0;l[[r,"odd"].join("_")]=l.$odd=f,l[[r,"even"].join("_")]=l.$even=!f,l[r]=e,s.push(l),a.push(["{{with ",o,"[",c,"] }}",n,"{{/with}}"].join(""))},this),i[o]=s,a.join("")};n.command("for",function(n){n.$isAFrame=!1;var e=n.$attrs.$contents,o="";if(r.test(e)){var s=RegExp.$1,u=RegExp.$2||RegExp.$4,a=t.trim(RegExp.$3);if(s&&u){var o="_bg_for_datas_"+s;n.$attrs.$contents=u;var c=function(t,e){return a?n.$loadTmpl(a).then(function(t){return l(t,e)}):l(t,e)},l=function(t,e){return t=i(t,e,s,n.$withData(),o),n.$html(t)};n.$layout(function(){return n.$attrs.$result()},function(e){var r=e.value,i=t.isArray(r),o=i?r:t.sliceArray(r);return!i&&0==o.length&&(o=r?[r]:[]),c(n.$contents,o)})}}n.bgOnDispose(function(){var t=n.$withData();delete t[o]})}),n.command("if",function(n){var e,r=n.$contents,i=n.$elseList,o=function(e,o){if(-1==e&&o)return r;var s=n.$attrs.$result();if(s)return r;var u;return t.each(i,function(t,n){return!t.$attrs.$contents||e==n&&o||t.$attrs.$result()?(u=t.$contents,!1):void 0}),u},s=function(t,r){var i=o(r,t.value);if(i!=e)return n.$html&&n.$html(e=i)};n.$layout(function(){return n.$attrs.$result()},function(t){return s(t,-1)}),t.each(i,function(t,e){t.$attrs.$contents&&n.$layout(function(){return t.$attrs.$result()},function(t){return s(t,e)})})}),n.command("include",function(t){var n=function(n){return n?t.$loadTmpl(n).then(function(n){return t.$html(n)}):t.$html(t.$contents)};t.$init(function(){return n(t.$attrs.$getAttr("src"))}),t.bgNoObserve=!1,t.bgToObserve("src").bgObServe("src",function(t){n(t[0].value)}),t.bgNoObserve=!0,t.$export=t}),n.command("html",function(t){t.$layout(function(){return t.$attrs.$result()},function(n){return t.$html(n.value)})}),n.command("text",function(t){t.$layout(function(){return t.$attrs.$result()},function(n){return t.$text(n.value)})}),n.command("cp",function(t){t.$tmpl(t.$contents),t.$export=t}),n.command("tmpl",function(t){var n=t.$attrs.$getAttr("id");if(n){var e=/app/i.test(t.$attrs.$getAttr("for"));t.$saveTmpl(n,t.$contents,e)}t.$init(function(){t.$remove()})}),n.command("route",function(t){var n=t.$attrs.$getAttr("src"),e=t.$app,r=0;n&&t.$init(function(){i.href(n)});var i={bgNoObserve:!0,url:n,name:t.$name,href:function(n,e){var i=++r;return this.url=n,t.$loadTmpl("view::"+n).then(function(n){return i==r?t.$html(n,e):""})},queryParams:function(){return this.routeParams().queryParams},routeParams:function(){var t=this.url,n=e.routeContext("route::"+t);return n.params},reload:function(t){return this.href(n,t)},toString:function(){return this.url},close:function(){this.bgDispose(),t.$remove()}};t.$name&&(t.$app._location[t.$name]=i),t.$export=i}),t.app.extend({_location:{},location:function(t){return this._location[t]}})}(bingo),function(t){"use strict";var n=t.defualtApp;t.app.extend({_attr:{},attr:function(t,r){return 1==arguments.length?this._attr[t]||n._attr[t]||n._attr[e]:void(this._attr[t]=r)}});var e="bg_default_vattr",r=/^\s*on/i;n.attr(e,function(n){var e=n.$name,i=n.$view;if(r.test(e)){var o=e.replace(r,""),s=function(t,e){var r=function(){return i.$updateAsync(),e.apply(this,arguments)};n.$on(t,r)},u=/^\s*\[(.|\n)*\]\s*$/g.test(n.$contents)?n.$result():n.$value();return t.isFunction(u)||t.isArray(u)||(u=function(t){return n.$eval(t)}),void s(o,u)}n.$layoutResult(function(t){if("value"==e&&n.$is("option")){var r=n.$parent("select");r&&r.$attrs.model&&r.$attrs.model.$value()==t.value&&n.$prop("selected",!0)}n.$attr(e,t.value)})}),n.attr("node",function(t){t.$init(function(){t.$value(t.$node)})}),t.each("checked,unchecked,disabled,enabled,readonly".split(","),function(t){n.attr(t,function(n){var e=function(e){switch(t){case"enabled":n.$prop("disabled",!e);break;case"unchecked":n.$prop("checked",!e);break;default:n.$prop(t,e)}};if(n.$layoutResult(function(t){e(t.value)}),"checked"==t||"unchecked"==t){var r=function(){var e=n.$prop("checked");n.$value("checked"==t?e:!e)};n.$on("click",r)}})}),t.each("show,hide,visible".split(","),function(t){n.attr(t,function(n){var e=function(e){switch(t){case"hide":e=!e;case"show":e?n.$show():n.$hide();break;case"visible":e=e?"visible":"hidden",n.$css("visibility",e)}};n.$layoutResult(function(t){e(t.value)})})}),n.attr("model",function(n){var e,r,i=function(t){return 0==arguments.length?n.$attr("value"):void n.$attr("value",t)},o=n.$node,s=n.$attr("type"),u="radio"==s,a="checkbox"==s,c=a?i(o):null,l="select"==o.tagName.toLowerCase(),f=function(){return a?n.$prop("checked")?c:"":i()},h=function(e){e=l&&t.isArray(e)?e:t.toStr(e),a?n.$prop("checked",i()==e):u?n.$prop("checked",i()==e):i(l?e:e)},p=function(){var t=f();(e!=t||u)&&(e=t,n.$value(t))};r=u?"click":"change",r&&n.$on(r,p),n.$layoutValue(function(t){var n=t.value;h(n)})})}(bingo);